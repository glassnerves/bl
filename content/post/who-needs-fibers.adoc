= Who needs fibers?
:revdate: 2021-01-25

:cpp: C++
:_:
:imagesdir: /


[ditaa,md_subs,title="The gateway subscription model"]
....
+--------------+
| WebSocket    |   TCP (initial snapshot + followup incrementals...)
| subscription | <-----+
+--------------+       |
                       |                 UDP   +----------+
+--------------+   TCP +- +---------+ <------- | Snapshot |
| WebSocket    | <------- | Gateway |          +----------+
| subscription |       +- | process | <-+
+--------------+       |  +---------+   | UDP  +-------------+
                       |                +----- | Incremental |
+--------------+   TCP |                       +-------------+
| WebSocket    | <-----+
| subscription |
+--------------+
....

[syntrax]
...
indentstack(10,
  line(opt('-'), choice('0', line('1-9', loop(None, '0-9'))),
    opt('.', loop('0-9', None))),
  line(opt(choice('e', 'E'), choice(None, '+', '-'), loop('0-9', None)))
)
...
